# تطوير نموذج لتوقع انسحاب المستخدمين
##  وصف المشروع
هذا المشروع يهدف إلى بناء نظام للتنبؤ باحتمالية انسحاب (Churn) مستخدمي منصة بث موسيقي تعتمد على الاشتراكات.  
النظام يعتمد على **سجلات نشاط المستخدمين** ويستخدم تقنيات تعلم الآلة للتعرف على العملاء المعرّضين لإلغاء الاشتراك.

---

##  خطوات الحل
1. **تحليل البيانات وتنظيفها**  
   - تحويل الطوابع الزمنية (timestamps) لتواريخ مقروءة.  
   - معالجة القيم المفقودة.  
   - تعريف متغير الهدف (Churn) استنادًا إلى سلوك المستخدم.

2. **هندسة الخصائص (Feature Engineering)**  
   - عدد الأغاني المشغلة.  
   - عدد الفنانين المميزين لكل مستخدم.  
   - طول الأغنية المتوسط.  
   - مدة الاشتراك (Subscription length).  
   - النشاط الأخير (Recency).  
   - ترميز الخصائص مثل `gender` و `level`.

3. **التعامل مع التحديات**  
   - **عدم توازن الفئات**: استخدام `scale_pos_weight` في XGBoost أو `class_weight` في RandomForest.  
   - **تحديد الانسحاب بدقة**: تعريف واضح يعتمد على توقف المستخدم عن النشاط لفترة طويلة.  
   - **تسرب البيانات (Data Leakage)**: التأكد من أن ميزات التدريب لا تتضمن معلومات من المستقبل.

4. **تدريب النموذج**  
   - تم استخدام **RandomForestClassifier** و **XGBoostClassifier**.  
   - تقييم الأداء باستخدام `classification_report` و `ROC-AUC`.

5. **التقييم**  
   - دقة النموذج (Accuracy).  
   - منحنى ROC-AUC لتقييم القدرة على التمييز بين العملاء المنسحبين وغير المنسحبين.  

6. **نشر النموذج عبر API**  
   - استخدام **FastAPI** لتقديم خدمة `/predict` لإرجاع احتمالية الانسحاب.  
   - تغليف المشروع باستخدام Docker لسهولة التشغيل.  

7. **إعادة التدريب الدوري**  
   - تصميم سكربت لإعادة التدريب عند توفر بيانات جديدة.  
   - تسجيل النماذج والتجارب باستخدام **MLflow**.  

8. **مراقبة النموذج**  
   - تتبع انحراف البيانات (Data Drift).  
   - مراقبة أداء النموذج في الإنتاج.

---

## ⚡️ الصعوبات التي واجهتها
- تعريف الانسحاب بدقة (Churn definition).  
- التعامل مع **عدم توازن الفئات**.  
- التأكد من عدم وجود **Data Leakage** عند بناء الميزات.  

---

## 💡 اقتراحات مستقبلية
- تجربة نماذج أكثر تقدمًا مثل **LightGBM** أو **Neural Networks**.  
- استخدام **SHAP values** لتحليل وتفسير قرارات النموذج.  
- بناء **لوحة تحكم تفاعلية** لمراقبة الانسحاب بشكل حيّ.  
- إضافة **نظام تنبيهات** عند ارتفاع احتمالية الانسحاب لعميل معين.  

---

## 🛠️ طريقة التشغيل
```bash
# تثبيت المتطلبات
pip install -r requirements.txt

# تدريب النموذج
python train.py

# تشغيل الـ API
uvicorn app:app --reload
# -
